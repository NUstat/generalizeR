variables = c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = FALSE,
n_strata = 3,
variables = c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = FALSE,
n_strata = 3,
variables = c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = FALSE,
n_strata = 3,
variables = c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = FALSE,
n_strata = 3,
variables = c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total"),
idvar = "ncessch")
View(inference_pop)
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = TRUE,
n_strata = 3,
variables = c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total"),
idvar = "ncessch")
inference_pop %>% sapply(function(x) sum(is.na(x)))
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(is.na(x)))
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x)))
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
max()
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
min()
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
min() == 0
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
min() == 0
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x)))
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
names(which(x >0))
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
sapply(function(x) names(which(x >0)))
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x)))
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) == 0
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
select_if(function (x) sum(x)==0)
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
select_if(function(x) sum(x)==0)
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
data.frame() %>%
select_if()
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
data.frame() %>%
select_if(function(x) sum(x)==0)
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
data.frame() %>%
filter(x==0)
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
data.frame()
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
data.frame() %>%
filter(.==0)
inference_pop %>%
select(c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total")) %>%
sapply(function(x) sum(!is.na(x))) %>%
data.frame() %>%
filter(.==0) %>% row.names()
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = TRUE,
n_strata = 3,
variables = c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = FALSE,
n_strata = 3,
variables = c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = FALSE,
n_strata = 3,
variables = c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = FALSE,
n_strata = 3,
variables = c("pct_female",
"pct_black_or_african_american",
"pct_free_and_reduced_lunch",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = FALSE,
n_strata = 3,
variables = c("pct_female",
"pct_black_or_african_american",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = FALSE,
n_strata = 3,
variables = c("pct_female",
"pct_black_or_african_american",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = FALSE,
n_strata = 3,
variables = c("pct_female",
"pct_black_or_african_american",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = FALSE,
n_strata = 3,
variables = c("pct_female",
"pct_black_or_african_american",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = FALSE,
n_strata = 22,
variables = c("pct_female",
"pct_black_or_african_american",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = FALSE,
n_strata = 23,
variables = c("pct_female",
"pct_black_or_african_american",
"total"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
inference_pop <- cc %>%
filter(st == "TN") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
strat_output <- stratify(data = inference_pop,
guided = TRUE,
n_strata = 23,
variables = c("pct_female",
"pct_black_or_african_american",
"total"),
idvar = "ncessch")
source("~/STEPP Center/generalizeR/R/stratify.R", echo=TRUE)
# Note:
#  changing back to this (below)
#   rmarkdown::html_vignette
# would probably make the vignette smaller.
knitr::opts_chunk$set(echo = TRUE)
library(crayon)
# install.packages('devtools')
library(devtools)
library(tidyverse)
# install_github("katiecoburn/generalizeRdata")
# install_github("NUstat/generalizeR")
library(generalizeRdata)
library(generalizeR)
library(ggthemes)
# install_github("eliocamp/ggnewscale")
library(ggnewscale)
library(gridExtra)
library(ggrepel)
# install.packages("usmap")
library(usmap)
# install.packages("kableExtra")
library(kableExtra)
# install.packages("viridis")
library(viridis)
# install.packages("patchwork")
library(patchwork)
library(lazyeval)
inference_pop <- cc %>%
filter(st == "TX") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
inference_pop <- cc %>%
filter(st == "TX") %>%
filter(charter == 1) %>%
filter(g_10_offered == "Yes")
# install_github("katiecoburn/generalizeRdata")
# install_github("NUstat/generalizeR")
library(generalizeRdata)
library(generalizeR)
library(magrittr)
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
cc_df <- cc
inference_pop <- cc %>%
filter(st == "IL") %>%
filter(charter == 0) %>%
filter(g_10_offered == "No")
inference_pop <- read.csv("../CompositePlanetarySystems_v3.csv")
strat_output <- stratify(data = inference_pop,
guided = TRUE,
n_strata = 3,
variables = c("pct_white",
"pct_male"),
idvar = "ncessch")
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
planet_pop <- read.csv("../CompositePlanetarySystems_v3.csv")
planet_strat_output <- stratify(data = planet_pop,
guided = FALSE,
n_strata = 4,
variables = colnames(planet_pop)[c(2,3,4,5,8,9,10,11,12,13,14,
15,16,17,18,19,20,21,22,23,24,
25,26)],
idvar = "pl_name")
planet_recruit_output <- recruit(planet_strat_output,
guided = FALSE,
sample_size = 70
)
planet_pop %>% nunique()
planet_pop %>% n_distinct
planet_pop %>% rowwise %>% n_distinct
planet_pop %>% summarise_all(n_unique)
planet_pop %>% summarise_all(n_distinct)
planet_strat_output$dataset %>% summarise_all(n_distinct())
planet_strat_output$dataset %>% summarise_all(n_distinct)
planet_strat_output$dataset %>% summarise_all(n_distinct)
planet_pop %>% drop_na %>% summarise_all(n_distinct)
#library(generalizeR)
library(generalizeRdata)
library(tidyverse)
library(devtools)
load_all("./")
planet_pop <- read.csv("../CompositePlanetarySystems_v3.csv")
planet_strat_output <- stratify(data = planet_pop,
guided = FALSE,
n_strata = 4,
variables = colnames(planet_pop)[c(2,3,4,5,8,10,11,12,13,
15,16,17,18,19,20,21,22,23,24,
25,26)],
idvar = "pl_name")
planet_recruit_output <- recruit(planet_strat_output,
guided = FALSE,
sample_size = 70
)
duplicated(t(planet_pop))
duplicated(t(planet_pop %>% drop_na))
planet_recruit_output <- recruit(planet_strat_output,
guided = FALSE,
sample_size = 70
)
